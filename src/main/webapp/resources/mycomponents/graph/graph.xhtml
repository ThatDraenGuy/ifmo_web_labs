<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:cc="http://xmlns.jcp.org/jsf/composite"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:my="http://xmlns.jcp.org/jsf/composite/mycomponents/graph">
<ui:component xmlns="http://www.w3.org/2000/svg">
    <cc:interface>
        <cc:attribute name="graphSize" required="true"/>
        <cc:attribute name="elementSize" required="true"/>
        <cc:attribute name="backgroundColor"/>
        <cc:attribute name="graphColor"/>
        <cc:attribute name="axisColor"/>
    </cc:interface>
    <cc:implementation>
        <c:set var="base" value="#{cc.attrs.elementSize}"/>
        <c:set var="center" value="#{cc.attrs.graphSize/2}"/>
        <svg width="#{cc.attrs.graphSize}" height="#{cc.attrs.graphSize}" color="#{cc.attrs.backgroundColor}" fill="#{cc.attrs.backgroundColor}">
            <c:forEach items="#{quadrantsBean.quadrants}" var="quadrant">
                <my:quadrant quadrant="#{quadrant}" center="#{center}" base="#{base}" color="#{cc.attrs.graphColor}"/>
            </c:forEach>

            <ui:repeat value="#{historyBean.attempts}" var="attempt">
                <my:point attempt="#{attempt}" center="#{center}" base="#{base}"/>
            </ui:repeat>

            <my:axis begin="0" center="#{center}" end="#{cc.attrs.graphSize}" color="#{cc.attrs.axisColor}"/>
            <my:labels base="#{base}" center="#{center}" color="#{cc.attrs.axisColor}"/>
        </svg>
    </cc:implementation>
</ui:component>
</html>
